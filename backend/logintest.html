<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Firebase 이메일 로그인 테스트</title>
</head>

<body>
    <h1>이메일 로그인 테스트</h1>

    <form id="loginForm">
        <label for="email">이메일:</label>
        <input type="email" id="email" required />
        <br><br>

        <label for="password">비밀번호:</label>
        <input type="password" id="password" required />
        <br><br>

        <button type="submit">로그인</button>
    </form>

    <pre id="output"></pre>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

        // Firebase 설정(변경 X)
        const firebaseConfig = {
            apiKey: "AIzaSyALislKfX7MQeh1IteqWiiaxYGJ_KrNZN4",
            authDomain: "ma-y-b1fa6.firebaseapp.com",
            databaseURL: "https://ma-y-b1fa6-default-rtdb.firebaseio.com",
            projectId: "ma-y-b1fa6",
            storageBucket: "ma-y-b1fa6.firebasestorage.app",
            messagingSenderId: "48645617538",
            appId: "1:48645617538:web:23d556cdd2c5b223b2019b",
            measurementId: "G-8CPE7B7PLN",
        };
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        const form = document.getElementById("loginForm");
        const output = document.getElementById("output");

        form.addEventListener("submit", async (event) => {
            event.preventDefault();

            const email = document.getElementById("email").value.trim();
            const password = document.getElementById("password").value;

            try {
                const credential = await signInWithEmailAndPassword(auth, email, password);
                const token = await credential.user.getIdToken();
                output.textContent = `✅ 로그인 성공\nUID: ${credential.user.uid}\nID Token:\n${token}`;
            } catch (error) {
                output.textContent = `❌ 로그인 실패\n${error.message}`;
            }
        });
    </script>
</body>

</html>